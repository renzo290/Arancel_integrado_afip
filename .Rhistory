Codigo_unidad_derecho_especifico)
nomenclador <- nomenclador %>%
mutate(Derecho_exportacion = as.numeric(Derecho_exportacion),
Derecho_impo_extrazona = as.numeric(Derecho_impo_extrazona),
Derecho_impo_intrazona = as.numeric(Derecho_impo_intrazona),
Derecho_impo_EM = as.numeric(Derecho_impo_EM),
Reintegro_extrazona = as.numeric(Reintegro_extrazona),
Reintegro_intrazona = as.numeric(Reintegro_intrazona),
Codigo_unidad_derecho_especifico = as.numeric(Codigo_unidad_derecho_especifico))
table(nomenclador$Derecho_exportacion)
table(nomenclador$Codigo_unidad_derecho_especifico)
table(nomenclador$Codigo_unidad_estadistica)
table(nomenclador$Derecho_impo_extrazona)
table(nomenclador$Derecho_impo_EM)
####Se exportan el archivo en otro formato####
if(!file.exists("Base_depurada")) {
dir.create("Base_depurada")
}
require(openxlsx)
write.xlsx(nomenclador, file = "Base_depurada/nomenclador.xlsx", dec = ",",
overwrite = T,  ) #Probar con la descripción.
?stri_enc_toutf8()
stri_enc_toutf8(nomenclador$Descripcion, is_unknown_8bit = F, validate = F)
stringi::stri_enc_toutf8(nomenclador$Descripcion, is_unknown_8bit = F, validate = F)
View(nomenclador)
write.xlsx(nomenclador, file = "Base_depurada/nomenclador.xlsx", dec = ",",
overwrite = T) #Probar con la descripción.
nomenclador <- stringi::stri_enc_toutf8(nomenclador$Descripcion)
#Paquetes
library(tidyverse)
#Si no está creada, se crea una carpeta para guardar las bases de AFIP
if(!file.exists("Bases_afip")) {
dir.create("Bases_afip")
}
#Se descargan los archivos de la página de AFIP y se carga el arancel integrado
download.file(
url = "https://www.afip.gob.ar/aduana/arancelintegrado/archivos/arancel.zip",
destfile = "Bases_afip/arancel.zip", mode='wb'
)
unzip(zipfile = 'Bases_afip/arancel.zip', exdir = "Bases_afip")
unlink('Bases_afip/arancel.zip')
nomenclador <- readr::read_delim("Bases_afip/nomenclador_25012022.txt",
delim = "@", escape_double = FALSE, col_names = FALSE,
trim_ws = TRUE)
View(nomenclador)
####Data Wrangling - Modificamos el formato####
Columnas <- c("ID", "SIM", "Derecho_exportacion", "Reintegro_extrazona", "Derecho_impo_extrazona",
"Reintegro_intrazona", "Derecho_impo_intrazona", "Derecho_impo_EM",
"Codigo_unidad_estadistica", "Codigo_unidad_derecho_especifico",
"Descripcion")
colnames(nomenclador) <- Columnas
rm(Columnas)
nomenclador <- nomenclador %>%
mutate(Caracteres = nchar(SIM),
Capitulo = substr(SIM, 1, 2),
NCM_4 = substr(SIM, 1, 4),
NCM = substr(SIM, 1, 10)) %>%
filter(Caracteres == 15) %>%
filter(Capitulo != "00")
nomenclador <- select(nomenclador, SIM, Capitulo, NCM_4, NCM, Descripcion, Derecho_exportacion,
Derecho_impo_extrazona, Derecho_impo_intrazona, Derecho_impo_EM,
Reintegro_extrazona, Reintegro_intrazona, Codigo_unidad_estadistica,
Codigo_unidad_derecho_especifico)
nomenclador <- nomenclador %>%
mutate(Derecho_exportacion = as.numeric(Derecho_exportacion),
Derecho_impo_extrazona = as.numeric(Derecho_impo_extrazona),
Derecho_impo_intrazona = as.numeric(Derecho_impo_intrazona),
Derecho_impo_EM = as.numeric(Derecho_impo_EM),
Reintegro_extrazona = as.numeric(Reintegro_extrazona),
Reintegro_intrazona = as.numeric(Reintegro_intrazona),
Codigo_unidad_derecho_especifico = as.numeric(Codigo_unidad_derecho_especifico))
table(nomenclador$Derecho_exportacion)
table(nomenclador$Codigo_unidad_derecho_especifico)
table(nomenclador$Codigo_unidad_estadistica)
table(nomenclador$Derecho_impo_extrazona)
table(nomenclador$Derecho_impo_EM)
####Se exportan el archivo en otro formato####
if(!file.exists("Base_depurada")) {
dir.create("Base_depurada")
}
require(openxlsx)
nomenclador <- nomenclador %>%
stringi::stri_enc_toutf8(nomenclador$Descripcion)
nomenclador <- nomenclador %>%
stringi::stri_enc_toutf8(nomenclador$Descripcion, is_unknown_8bit = F)
?stri_enc_toutf8()
library(tidyverse)
require(openxlsx)
#Si no está creada, se crea una carpeta para guardar las bases de AFIP
if(!file.exists("Bases_afip")) {
dir.create("Bases_afip")
}
#Se descargan los archivos de la página de AFIP y se carga el arancel integrado
download.file(
url = "https://www.afip.gob.ar/aduana/arancelintegrado/archivos/arancel.zip",
destfile = "Bases_afip/arancel.zip", mode='wb'
)
unzip(zipfile = 'Bases_afip/arancel.zip', exdir = "Bases_afip")
unlink('Bases_afip/arancel.zip')
nomenclador <- readr::read_delim("Bases_afip/nomenclador_25012022.txt",
delim = "@", escape_double = FALSE, col_names = FALSE,
trim_ws = TRUE)
View(nomenclador)
####Data Wrangling - Modificamos el formato####
Columnas <- c("ID", "SIM", "Derecho_exportacion", "Reintegro_extrazona", "Derecho_impo_extrazona",
"Reintegro_intrazona", "Derecho_impo_intrazona", "Derecho_impo_EM",
"Codigo_unidad_estadistica", "Codigo_unidad_derecho_especifico",
"Descripcion")
colnames(nomenclador) <- Columnas
rm(Columnas)
nomenclador <- nomenclador %>%
mutate(Caracteres = nchar(SIM),
Capitulo = substr(SIM, 1, 2),
NCM_4 = substr(SIM, 1, 4),
NCM = substr(SIM, 1, 10)) %>%
filter(Caracteres == 15) %>%
filter(Capitulo != "00")
nomenclador <- select(nomenclador, SIM, Capitulo, NCM_4, NCM, Descripcion, Derecho_exportacion,
Derecho_impo_extrazona, Derecho_impo_intrazona, Derecho_impo_EM,
Reintegro_extrazona, Reintegro_intrazona, Codigo_unidad_estadistica,
Codigo_unidad_derecho_especifico)
nomenclador <- nomenclador %>%
mutate(Derecho_exportacion = as.numeric(Derecho_exportacion),
Derecho_impo_extrazona = as.numeric(Derecho_impo_extrazona),
Derecho_impo_intrazona = as.numeric(Derecho_impo_intrazona),
Derecho_impo_EM = as.numeric(Derecho_impo_EM),
Reintegro_extrazona = as.numeric(Reintegro_extrazona),
Reintegro_intrazona = as.numeric(Reintegro_intrazona),
Codigo_unidad_derecho_especifico = as.numeric(Codigo_unidad_derecho_especifico))
table(nomenclador$Derecho_exportacion)
table(nomenclador$Codigo_unidad_derecho_especifico)
table(nomenclador$Codigo_unidad_estadistica)
table(nomenclador$Derecho_impo_extrazona)
table(nomenclador$Derecho_impo_EM)
####Se exportan el archivo en otro formato####
descripcion <- nomenclador %>% select(Descripcion)
View(descripcion)
descripcion$Descripcion <- stringi::stri_enc_toutf8(descripcion$Descripcion, is_unknown_8bit = F)
View(descripcion)
library(readr)
nomenclador_25012022 <- read_delim("Bases_afip/nomenclador_25012022.txt",
delim = "@", escape_double = FALSE, col_names = FALSE,
trim_ws = TRUE)
View(nomenclador_25012022)
View(nomenclador_25012022)
nomenclador_25012022 <- read.delim2("C:/Users/Ministerio/Desktop/Renzo/Proyectos RStudio/Arancel_integrado/Bases_afip/nomenclador_25012022.txt", encoding="UTF-8", header=FALSE)
View(nomenclador_25012022)
?read_delim
#Paquetes
library(tidyverse)
require(openxlsx)
#Si no está creada, se crea una carpeta para guardar las bases de AFIP
if(!file.exists("Bases_afip")) {
dir.create("Bases_afip")
}
#Se descargan los archivos de la página de AFIP y se carga el arancel integrado
download.file(
url = "https://www.afip.gob.ar/aduana/arancelintegrado/archivos/arancel.zip",
destfile = "Bases_afip/arancel.zip", mode='wb'
)
unzip(zipfile = 'Bases_afip/arancel.zip', exdir = "Bases_afip")
unlink('Bases_afip/arancel.zip')
nomenclador <- readr::read_delim("Bases_afip/nomenclador_25012022.txt",
delim = "@", escape_double = FALSE, col_names = FALSE,
trim_ws = TRUE)
View(nomenclador)
####Data Wrangling - Modificamos el formato####
Columnas <- c("ID", "SIM", "Derecho_exportacion", "Reintegro_extrazona", "Derecho_impo_extrazona",
"Reintegro_intrazona", "Derecho_impo_intrazona", "Derecho_impo_EM",
"Codigo_unidad_estadistica", "Codigo_unidad_derecho_especifico",
"Descripcion")
colnames(nomenclador) <- Columnas
rm(Columnas)
nomenclador <- nomenclador %>%
mutate(Caracteres = nchar(SIM),
Capitulo = substr(SIM, 1, 2),
NCM_4 = substr(SIM, 1, 4),
NCM = substr(SIM, 1, 10)) %>%
filter(Caracteres == 15) %>%
filter(Capitulo != "00")
nomenclador <- select(nomenclador, SIM, Capitulo, NCM_4, NCM, Descripcion, Derecho_exportacion,
Derecho_impo_extrazona, Derecho_impo_intrazona, Derecho_impo_EM,
Reintegro_extrazona, Reintegro_intrazona, Codigo_unidad_estadistica,
Codigo_unidad_derecho_especifico)
nomenclador <- nomenclador %>%
mutate(Derecho_exportacion = as.numeric(Derecho_exportacion),
Derecho_impo_extrazona = as.numeric(Derecho_impo_extrazona),
Derecho_impo_intrazona = as.numeric(Derecho_impo_intrazona),
Derecho_impo_EM = as.numeric(Derecho_impo_EM),
Reintegro_extrazona = as.numeric(Reintegro_extrazona),
Reintegro_intrazona = as.numeric(Reintegro_intrazona),
Codigo_unidad_derecho_especifico = as.numeric(Codigo_unidad_derecho_especifico))
table(nomenclador$Derecho_exportacion)
table(nomenclador$Codigo_unidad_derecho_especifico)
table(nomenclador$Codigo_unidad_estadistica)
table(nomenclador$Derecho_impo_extrazona)
table(nomenclador$Derecho_impo_EM)
descripcion <- nomenclador %>% select(Descripcion)
Encoding(descripcion) <- "latin1"
EncodingI(descripcion) <- "latin1"
EncodingI(descripcion$Descripcion) <- "latin1"
Encoding(descripcion$Descripcion) <- "latin1"
View(descripcion)
Encoding(nomenclador$Descripcion) <- "latin1"
View(nomenclador)
View(descripcion)
Encoding(descripcion$Descripcion) <- "UTF-8"
View(descripcion)
Encoding(descripcion$Descripcion) <- "latin1"
View(descripcion)
Encoding(descripcion$Descripcion) <- "ASCII"
View(descripcion)
Encoding(descripcion$Descripcion) <- "ANSI"
View(descripcion)
View(descripcion)
Encoding(descripcion$Descripcion) <- "unix"
View(descripcion)
Encoding(nomenclador$Descripcion) <- "latin1"
View(nomenclador)
#####Depuración de la base de Arancel Integrado Común desde la página de AFIP####
#Paquetes
library(tidyverse)
require(openxlsx)
#Si no está creada, se crea una carpeta para guardar las bases de AFIP
if(!file.exists("Bases_afip")) {
dir.create("Bases_afip")
}
#Se descargan los archivos de la página de AFIP y se carga el arancel integrado
download.file(
url = "https://www.afip.gob.ar/aduana/arancelintegrado/archivos/arancel.zip",
destfile = "Bases_afip/arancel.zip", mode='wb'
)
unzip(zipfile = 'Bases_afip/arancel.zip', exdir = "Bases_afip")
unlink('Bases_afip/arancel.zip')
nomenclador <- readr::read_delim("Bases_afip/nomenclador_25012022.txt",
delim = "@", escape_double = FALSE, col_names = FALSE,
trim_ws = TRUE)
View(nomenclador)
####Data Wrangling - Modificamos el formato####
Columnas <- c("ID", "SIM", "Derecho_exportacion", "Reintegro_extrazona", "Derecho_impo_extrazona",
"Reintegro_intrazona", "Derecho_impo_intrazona", "Derecho_impo_EM",
"Codigo_unidad_estadistica", "Codigo_unidad_derecho_especifico",
"Descripcion")
colnames(nomenclador) <- Columnas
rm(Columnas)
nomenclador <- nomenclador %>%
mutate(Caracteres = nchar(SIM),
Capitulo = substr(SIM, 1, 2),
NCM_4 = substr(SIM, 1, 4),
NCM = substr(SIM, 1, 10)) %>%
filter(Caracteres == 15) %>%
filter(Capitulo != "00")
nomenclador <- select(nomenclador, SIM, Capitulo, NCM_4, NCM, Descripcion, Derecho_exportacion,
Derecho_impo_extrazona, Derecho_impo_intrazona, Derecho_impo_EM,
Reintegro_extrazona, Reintegro_intrazona, Codigo_unidad_estadistica,
Codigo_unidad_derecho_especifico)
nomenclador <- nomenclador %>%
mutate(Derecho_exportacion = as.numeric(Derecho_exportacion),
Derecho_impo_extrazona = as.numeric(Derecho_impo_extrazona),
Derecho_impo_intrazona = as.numeric(Derecho_impo_intrazona),
Derecho_impo_EM = as.numeric(Derecho_impo_EM),
Reintegro_extrazona = as.numeric(Reintegro_extrazona),
Reintegro_intrazona = as.numeric(Reintegro_intrazona),
Codigo_unidad_derecho_especifico = as.numeric(Codigo_unidad_derecho_especifico))
#Se modifica el encoding de la columna "Descripcion"
Encoding(nomenclador$Descripcion) <- "latin1"
#Tablas resumidas
table(nomenclador$Derecho_exportacion)
table(nomenclador$Codigo_unidad_derecho_especifico)
table(nomenclador$Codigo_unidad_estadistica)
table(nomenclador$Derecho_impo_extrazona)
table(nomenclador$Derecho_impo_EM)
####Se exportan el archivo en otro formato####
if(!file.exists("Base_depurada")) {
dir.create("Base_depurada")
}
#Formato Excel
write.xlsx(nomenclador, file = "Base_depurada/nomenclador.xlsx", dec = ",",
overwrite = T)
#Paquetes
library(tidyverse)
require(openxlsx)
#Si no está creada, se crea una carpeta para guardar las bases de AFIP
if(!file.exists("Bases_afip")) {
dir.create("Bases_afip")
}
#Se descargan los archivos de la página de AFIP y se carga el arancel integrado
download.file(
url = "https://www.afip.gob.ar/aduana/arancelintegrado/archivos/arancel.zip",
destfile = "Bases_afip/arancel.zip", mode='wb'
)
unzip(zipfile = 'Bases_afip/arancel.zip', exdir = "Bases_afip")
unlink('Bases_afip/arancel.zip')
download.file(
url = "https://www.afip.gob.ar/aduana/arancelintegrado/archivos/arancel.zip",
destfile = "Bases_afip/arancel.zip", mode='wb'
)
unzip(zipfile = 'Bases_afip/arancel.zip', exdir = "Bases_afip")
unlink('Bases_afip/arancel.zip')
nomenclador <- readr::read_delim("Bases_afip/nomenclador_27012022.txt",
delim = "@", escape_double = FALSE, col_names = FALSE,
trim_ws = TRUE)
View(nomenclador)
####Data Wrangling - Modificamos el formato####
Columnas <- c("ID", "SIM", "Derecho_exportacion", "Reintegro_extrazona", "Derecho_impo_extrazona",
"Reintegro_intrazona", "Derecho_impo_intrazona", "Derecho_impo_EM",
"Codigo_unidad_estadistica", "Codigo_unidad_derecho_especifico",
"Descripcion")
colnames(nomenclador) <- Columnas
rm(Columnas)
nomenclador <- nomenclador %>%
mutate(Caracteres = nchar(SIM),
Capitulo = substr(SIM, 1, 2),
NCM_4 = substr(SIM, 1, 4),
NCM = substr(SIM, 1, 10)) %>%
filter(Caracteres == 15) %>%
filter(Capitulo != "00")
nomenclador <- select(nomenclador, SIM, Capitulo, NCM_4, NCM, Descripcion, Derecho_exportacion,
Derecho_impo_extrazona, Derecho_impo_intrazona, Derecho_impo_EM,
Reintegro_extrazona, Reintegro_intrazona, Codigo_unidad_estadistica,
Codigo_unidad_derecho_especifico)
nomenclador <- nomenclador %>%
mutate(Derecho_exportacion = as.numeric(Derecho_exportacion),
Derecho_impo_extrazona = as.numeric(Derecho_impo_extrazona),
Derecho_impo_intrazona = as.numeric(Derecho_impo_intrazona),
Derecho_impo_EM = as.numeric(Derecho_impo_EM),
Reintegro_extrazona = as.numeric(Reintegro_extrazona),
Reintegro_intrazona = as.numeric(Reintegro_intrazona),
Codigo_unidad_derecho_especifico = as.numeric(Codigo_unidad_derecho_especifico))
#Se modifica el encoding de la columna "Descripcion"
Encoding(nomenclador$Descripcion) <- "latin1"
table(nomenclador$Derecho_exportacion)
table(nomenclador$Codigo_unidad_derecho_especifico)
table(nomenclador$Codigo_unidad_estadistica)
table(nomenclador$Derecho_impo_extrazona)
table(nomenclador$Derecho_impo_EM)
table(nomenclador$Derecho_impo_EM)
table(nomenclador$Derecho_impo_intrazona)
library(tidyverse)
require(openxlsx)
#Si no está creada, se crea una carpeta para guardar las bases de AFIP
if(!file.exists("Bases_afip")) {
dir.create("Bases_afip")
}
#Se descargan los archivos de la página de AFIP y se carga el arancel integrado
download.file(
url = "https://www.afip.gob.ar/aduana/arancelintegrado/archivos/arancel.zip",
destfile = "Bases_afip/arancel.zip", mode='wb'
)
unzip(zipfile = 'Bases_afip/arancel.zip', exdir = "Bases_afip")
unlink('Bases_afip/arancel.zip')
nomenclador <- readr::read_delim("Bases_afip/nomenclador_27012022.txt",
delim = "@", escape_double = FALSE, col_names = FALSE,
trim_ws = TRUE)
View(nomenclador)
####Data Wrangling - Modificamos el formato####
Columnas <- c("ID", "SIM", "Derecho_exportacion", "Reintegro_extrazona", "Derecho_impo_extrazona",
"Reintegro_intrazona", "Derecho_impo_intrazona", "Derecho_impo_EM",
"Codigo_unidad_estadistica", "Codigo_unidad_derecho_especifico",
"Descripcion")
colnames(nomenclador) <- Columnas
rm(Columnas)
nomenclador <- nomenclador %>%
mutate(Caracteres = nchar(SIM),
Capitulo = substr(SIM, 1, 2),
NCM_4 = substr(SIM, 1, 4),
NCM = substr(SIM, 1, 10)) %>%
filter(Caracteres == 15) %>%
filter(Capitulo != "00")
nomenclador <- select(nomenclador, SIM, Capitulo, NCM_4, NCM, Descripcion, Derecho_exportacion,
Derecho_impo_extrazona, Derecho_impo_intrazona,
Reintegro_extrazona, Reintegro_intrazona)
nomenclador <- nomenclador %>%
mutate(Derecho_exportacion = as.numeric(Derecho_exportacion),
Derecho_impo_extrazona = as.numeric(Derecho_impo_extrazona),
Derecho_impo_intrazona = as.numeric(Derecho_impo_intrazona),
Derecho_impo_EM = as.numeric(Derecho_impo_EM),
Reintegro_extrazona = as.numeric(Reintegro_extrazona),
Reintegro_intrazona = as.numeric(Reintegro_intrazona),
Codigo_unidad_derecho_especifico = as.numeric(Codigo_unidad_derecho_especifico))
#Se modifica el encoding de la columna "Descripcion"
Encoding(nomenclador$Descripcion) <- "latin1"
#Tablas resumidas
table(nomenclador$Derecho_exportacion)
table(nomenclador$Derecho_impo_extrazona)
table(nomenclador$Derecho_impo_intrazona)
nomenclador <- select(nomenclador, SIM, Capitulo, NCM_4, NCM, Descripcion, Derecho_exportacion,
Reintegro_intrazona, Reintegro_extrazona,
Derecho_impo_intrazona, Derecho_impo_extrazona)
View(nomenclador)
library(tidyverse)
require(openxlsx)
#Si no está creada, se crea una carpeta para guardar las bases de AFIP
if(!file.exists("Bases_afip")) {
dir.create("Bases_afip")
}
#Se descargan los archivos de la página de AFIP y se carga el arancel integrado
download.file(
url = "https://www.afip.gob.ar/aduana/arancelintegrado/archivos/arancel.zip",
destfile = "Bases_afip/arancel.zip", mode='wb'
)
unzip(zipfile = 'Bases_afip/arancel.zip', exdir = "Bases_afip")
unlink('Bases_afip/arancel.zip')
nomenclador <- readr::read_delim("Bases_afip/nomenclador_27012022.txt",
delim = "@", escape_double = FALSE, col_names = FALSE,
trim_ws = TRUE)
View(nomenclador)
####Data Wrangling - Modificamos el formato####
Columnas <- c("ID", "SIM", "Derecho_exportacion", "Reintegro_extrazona", "Derecho_impo_extrazona",
"Reintegro_intrazona", "Derecho_impo_intrazona", "Derecho_impo_EM",
"Codigo_unidad_estadistica", "Codigo_unidad_derecho_especifico",
"Descripcion")
colnames(nomenclador) <- Columnas
rm(Columnas)
nomenclador <- nomenclador %>%
mutate(Caracteres = nchar(SIM),
Capitulo = substr(SIM, 1, 2),
NCM_4 = substr(SIM, 1, 4),
NCM = substr(SIM, 1, 10)) %>%
filter(Caracteres == 15) %>%
filter(Capitulo != "00")
nomenclador <- select(nomenclador, SIM, Capitulo, NCM_4, NCM, Descripcion, Derecho_exportacion,
Reintegro_intrazona, Reintegro_extrazona,
Derecho_impo_intrazona, Derecho_impo_extrazona)
nomenclador <- nomenclador %>%
mutate(Derecho_exportacion = as.numeric(Derecho_exportacion),
Derecho_impo_extrazona = as.numeric(Derecho_impo_extrazona),
Derecho_impo_intrazona = as.numeric(Derecho_impo_intrazona),
Derecho_impo_EM = as.numeric(Derecho_impo_EM),
Reintegro_extrazona = as.numeric(Reintegro_extrazona),
Reintegro_intrazona = as.numeric(Reintegro_intrazona),
Codigo_unidad_derecho_especifico = as.numeric(Codigo_unidad_derecho_especifico))
#Se modifica el encoding de la columna "Descripcion"
Encoding(nomenclador$Descripcion) <- "latin1"
#Tablas resumidas
table(nomenclador$Derecho_exportacion)
table(nomenclador$Derecho_impo_extrazona)
table(nomenclador$Derecho_impo_intrazona)
####Se exportan el archivo en otro formato####
if(!file.exists("Base_depurada")) {
dir.create("Base_depurada")
}
#Formato Excel
write.xlsx(nomenclador, file = "Base_depurada/nomenclador.xlsx", dec = ",",
overwrite = T)
#Formato csv
write.csv(nomenclador, file = "Base_depurada/nomenclador.csv")
#####Depuración de la base de Arancel Integrado Común desde la página de AFIP####
#Paquetes
library(tidyverse)
require(openxlsx)
#Si no está creada, se crea una carpeta para guardar las bases de AFIP
if(!file.exists("Bases_afip")) {
dir.create("Bases_afip")
}
#Se descargan los archivos de la página de AFIP y se carga el arancel integrado
download.file(
url = "https://www.afip.gob.ar/aduana/arancelintegrado/archivos/arancel.zip",
destfile = "Bases_afip/arancel.zip", mode='wb'
)
unzip(zipfile = 'Bases_afip/arancel.zip', exdir = "Bases_afip")
unlink('Bases_afip/arancel.zip')
nomenclador <- readr::read_delim("Bases_afip/nomenclador_27012022.txt",
delim = "@", escape_double = FALSE, col_names = FALSE,
trim_ws = TRUE)
View(nomenclador)
####Data Wrangling - Modificamos el formato####
Columnas <- c("ID", "SIM", "Derecho_exportacion", "Reintegro_extrazona", "Derecho_impo_extrazona",
"Reintegro_intrazona", "Derecho_impo_intrazona", "Derecho_impo_EM",
"Codigo_unidad_estadistica", "Codigo_unidad_derecho_especifico",
"Descripcion")
colnames(nomenclador) <- Columnas
rm(Columnas)
nomenclador <- nomenclador %>%
mutate(Caracteres = nchar(SIM),
Capitulo = substr(SIM, 1, 2),
NCM_4 = substr(SIM, 1, 4),
NCM = substr(SIM, 1, 10)) %>%
filter(Caracteres == 15) %>%
filter(Capitulo != "00")
nomenclador <- select(nomenclador, SIM, Capitulo, NCM_4, NCM, Descripcion, Derecho_exportacion,
Reintegro_intrazona, Reintegro_extrazona,
Derecho_impo_intrazona, Derecho_impo_extrazona)
nomenclador <- nomenclador %>%
mutate(Derecho_exportacion = as.numeric(Derecho_exportacion),
Derecho_impo_extrazona = as.numeric(Derecho_impo_extrazona),
Derecho_impo_intrazona = as.numeric(Derecho_impo_intrazona),
Derecho_impo_EM = as.numeric(Derecho_impo_EM),
Reintegro_extrazona = as.numeric(Reintegro_extrazona),
Reintegro_intrazona = as.numeric(Reintegro_intrazona),
Codigo_unidad_derecho_especifico = as.numeric(Codigo_unidad_derecho_especifico))
#Se modifica el encoding de la columna "Descripcion"
Encoding(nomenclador$Descripcion) <- "latin1"
#Tablas resumidas
table(nomenclador$Derecho_exportacion)
table(nomenclador$Derecho_impo_extrazona)
table(nomenclador$Derecho_impo_intrazona)
####Se exportan el archivo en otro formato####
if(!file.exists("Base_depurada")) {
dir.create("Base_depurada")
}
#Formato Excel
write.xlsx(nomenclador, file = "Base_depurada/nomenclador.xlsx", dec = ",",
overwrite = T)
#Formato csv
write.csv(nomenclador, file = "Base_depurada/nomenclador.csv")
View(nomenclador)
ncm <- nomenclador %>%
group_by(NCM) %>%
summarise(cantidad = n())
View(ncm)
sum(ncm$cantidad)
